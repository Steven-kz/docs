import{_ as a,p as n,q as s,a1 as e}from"./framework-5866ffd3.js";const p={},t=e(`<h1 id="minio" tabindex="-1"><a class="header-anchor" href="#minio" aria-hidden="true">#</a> MinIo</h1><p>Minio 是个基于 Golang 编写的开源对象存储套件，基于Apache License v2.0开源协议，虽然轻量，却拥有着不错的性能。它兼容亚马逊S3云存储服务接口。可以很简单的和其他应用结合使用，例如 NodeJS、Redis、MySQL等。</p><h1 id="_1-应用场景" tabindex="-1"><a class="header-anchor" href="#_1-应用场景" aria-hidden="true">#</a> 1. 应用场景</h1><p>MinIO 的应用场景除了可以作为私有云的对象存储服务来使用，也可以作为云对象存储的网关层，无缝对接 Amazon S3 或者 MicroSoft Azure 。 <img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665580302631-04e59d88-77b4-4ddb-9706-3e0acb540640.png#averageHue=%23f9f9f9&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;id=u94669c76&amp;name=image.png&amp;originHeight=388&amp;originWidth=612&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=117221&amp;status=done&amp;style=none&amp;taskId=u3788c45d-faf6-4087-8d95-1c6d725e88d&amp;title=" alt="image.png"></p><h1 id="_2-特点" tabindex="-1"><a class="header-anchor" href="#_2-特点" aria-hidden="true">#</a> 2. 特点</h1><ol><li><strong>高性能</strong>：作为一款高性能存储，在标准硬件条件下，其读写速率分别可以达到 55Gb/s 和 35Gb/s。并且MinIO 支持一个对象文件可以是任意大小，从几kb到最大5T不等。</li><li><strong>可扩展</strong>：不同MinIO集群可以组成联邦，并形成一个全局的命名空间，并且支持跨越多个数据中心。</li><li><strong>云原生</strong>：容器化、基于K8S的编排、多租户支持。</li><li><strong>Amazon S3兼容</strong>：使用 Amazon S3 v2 / v4 API。可以使用Minio SDK，Minio Client，AWS SDK 和 AWS CLI 访问Minio服务器。</li><li><strong>SDK支持</strong>： <ul><li>GO SDK：https://github.com/minio/minio-go</li><li>JavaSDK：https://github.com/minio/minio-java</li><li>PythonSDK：https://github.com/minio/minio-py</li></ul></li><li><strong>图形化界面</strong>：有操作页面</li><li><strong>支持纠删码</strong>：MinIO使用纠删码、Checksum来防止硬件错误和静默数据污染。在最高冗余度配置下，即使丢失1/2的磁盘也能恢复数据。</li></ol><p>功能很强大，本文只是抛砖引玉，有兴趣的朋友自己去探索吧~</p><h1 id="_3-安装minio" tabindex="-1"><a class="header-anchor" href="#_3-安装minio" aria-hidden="true">#</a> 3.安装MinIO</h1><h2 id="_1-获取镜像" tabindex="-1"><a class="header-anchor" href="#_1-获取镜像" aria-hidden="true">#</a> 1. 获取镜像</h2><p>执行命令如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>docker pull minio<span class="token operator">/</span>minio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-启动镜像" tabindex="-1"><a class="header-anchor" href="#_2-启动镜像" aria-hidden="true">#</a> 2. 启动镜像</h2><p>执行命令如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> docker run <span class="token operator">-</span>p <span class="token number">9000</span><span class="token operator">:</span><span class="token number">9000</span> <span class="token operator">-</span>p <span class="token number">9001</span><span class="token operator">:</span><span class="token number">9001</span> <span class="token operator">--</span>name minio <span class="token operator">-</span>d <span class="token operator">--</span>restart<span class="token operator">=</span>always <span class="token operator">-</span>e <span class="token string">&quot;MINIO_ACCESS_KEY=admin&quot;</span> <span class="token operator">-</span>e <span class="token string">&quot;MINIO_SECRET_KEY=admin123&quot;</span> <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>data<span class="token operator">:</span><span class="token operator">/</span>data <span class="token operator">-</span>v <span class="token operator">/</span>home<span class="token operator">/</span>config<span class="token operator">:</span><span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>minio minio<span class="token operator">/</span>minio server <span class="token operator">--</span>console<span class="token operator">-</span>address <span class="token string">&quot;:9000&quot;</span> <span class="token operator">--</span>address <span class="token string">&quot;:9001&quot;</span> <span class="token operator">/</span>data 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>命令解释如下：</p><ul><li><strong>-p</strong>：<strong>9000</strong>是图形界面的端口，<strong>9001</strong>是API的端口，在使用SDK连接需要用到</li><li><strong>MINIO_ACCESS_KEY</strong>：指定图形界面的用户名</li><li><strong>MINIO_SECRET_KEY</strong>：指定图形界面的密码</li></ul><p>按照上述两个步骤启动成功即可。 注意：ACCESS_KEY 长度最少3个字符，SECRET_KEY 长度最少8个字符</p><h2 id="_3-图形界面操作" tabindex="-1"><a class="header-anchor" href="#_3-图形界面操作" aria-hidden="true">#</a> 3.图形界面操作</h2><p>安装成功后直接访问地址：<strong>http:/ip:9000/login</strong>，如下1 <img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665580826739-45889c54-6eb5-480c-a747-ead7fd131bc6.png#averageHue=%2308285a&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=722&amp;id=u02baa49b&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=524870&amp;status=done&amp;style=none&amp;taskId=u0bee920b-063a-4e94-b7cb-cabc3878fb4&amp;title=&amp;width=1536" alt="image.png"> 直接在<strong>Buckets</strong>菜单中创建一个桶为<strong>test</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665580879769-444a77b6-951a-4d8f-b483-9b6d09ba373c.png#averageHue=%23fdfdfd&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=722&amp;id=ucba9c7ac&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=221274&amp;status=done&amp;style=none&amp;taskId=ua68af288-35d3-42e8-aaa9-3614365b5c7&amp;title=&amp;width=1536" alt="image.png"> 并且设置这个桶的隐私规则为<strong>public</strong>，如下： <img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665580923046-8ae0aa59-ee8f-47c2-aaa8-f4248c1f1e05.png#averageHue=%23fbfbfb&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=722&amp;id=u2e91217c&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=219880&amp;status=done&amp;style=none&amp;taskId=u5b4b6703-f721-4a7e-bd99-72b413f3401&amp;title=&amp;width=1536" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665581001105-9d533da7-3947-4fd6-9843-9dc14378f8e9.png#averageHue=%23fcfcfb&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=722&amp;id=ub3e77a9b&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=254746&amp;status=done&amp;style=none&amp;taskId=uba8fb732-4309-49ba-9e25-77105f1e94f&amp;title=&amp;width=1536" alt="image.png"></p><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h1><p>4.SpringBoot整合MinIO上传文件</p><h2 id="_1-获取accesskey和secretkey" tabindex="-1"><a class="header-anchor" href="#_1-获取accesskey和secretkey" aria-hidden="true">#</a> 1. 获取accessKey和secretKey</h2><p>这里的<strong>accessKey</strong>和<strong>secretKey</strong>并不是图形界面登录名和密码，获取很简单，直接在图形界面中操作，如下图： <img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665581077408-ee834ebd-c222-4b26-a496-6e84ee18313c.png#averageHue=%23fefefe&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=573&amp;id=ucc2e6ff3&amp;name=image.png&amp;originHeight=716&amp;originWidth=1898&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=173428&amp;status=done&amp;style=none&amp;taskId=u509bff2b-a509-46de-bff1-f75e797922e&amp;title=&amp;width=1518.4" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665581124779-cd81166b-1ca2-4a83-b2ab-7fa26a460cb5.png#averageHue=%23fbfafa&amp;clientId=ue951bf77-ecb3-4&amp;from=paste&amp;height=722&amp;id=uaa51fa6f&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=294320&amp;status=done&amp;style=none&amp;taskId=ud6b17c2e-e7f7-49b1-be50-d585ec319e8&amp;title=&amp;width=1536" alt="image.png"></p><h3 id="_2-添加依赖" tabindex="-1"><a class="header-anchor" href="#_2-添加依赖" aria-hidden="true">#</a> <strong>2. 添加依赖</strong></h3><p>添加MinIO的依赖，如下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>    
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>io<span class="token punctuation">.</span>minio<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>  
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>minio<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>   
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">8.2</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-添加配置" tabindex="-1"><a class="header-anchor" href="#_3-添加配置" aria-hidden="true">#</a> <strong>3.添加配置</strong></h3><p>在<strong>aplication.yml</strong>配置中添加MInIO相关的配置，如下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>spring<span class="token operator">:</span>
  profiles<span class="token operator">:</span>
    active<span class="token operator">:</span> prod
  mvc<span class="token operator">:</span>
    pathmatch<span class="token operator">:</span>
      matching<span class="token operator">-</span>strategy<span class="token operator">:</span> <span class="token constant">ANT_PATH_MATCHER</span>  #防⽌swagger报错
  application<span class="token operator">:</span>
    name<span class="token operator">:</span> springboot<span class="token operator">-</span>minio
  servlet<span class="token operator">:</span>
    multipart<span class="token operator">:</span>
      max<span class="token operator">-</span>file<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8080</span>

minio<span class="token operator">:</span>
  # 访问的url
  endpoint<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">47.92</span><span class="token number">.168</span><span class="token number">.143</span>
  # <span class="token constant">API</span>的端口
  port<span class="token operator">:</span> <span class="token number">9001</span>
  # 秘钥
  accessKey<span class="token operator">:</span> mYPwI2TStiiaShnl
  secretKey<span class="token operator">:</span> <span class="token class-name">E43OfrkBq6j2ITYcPxZDHPHR8rruppbc</span>
  secure<span class="token operator">:</span> <span class="token boolean">false</span>
  bucket<span class="token operator">-</span>name<span class="token operator">:</span> test # 桶名 我这是给出了一个默认桶名
  image<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">10485760</span> # 我在这里设定了 图片文件的最大大小
  file<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">1073741824</span> # 此处是设定了文件的最大大小
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665582743641-f516e55c-0fc2-4ef6-9ec7-9e547b9c11af.png#averageHue=%23fcfcfc&amp;clientId=u990ab91e-cfc2-4&amp;from=paste&amp;height=472&amp;id=ub5e0686a&amp;name=image.png&amp;originHeight=590&amp;originWidth=1507&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=53338&amp;status=done&amp;style=none&amp;taskId=u9e1dc4c7-36d4-492f-8247-0f6298bf6f3&amp;title=&amp;width=1205.6" alt="image.png"> 接口返回的<strong>URL</strong>就是文件的访问地址，直接输入浏览器访问即可。 在MInIO中也可以看到存储的文件，如下图： <img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665582890907-2d4d5bc9-02ff-4d27-aaff-ac2b397342c4.png#averageHue=%23e3caaa&amp;clientId=u990ab91e-cfc2-4&amp;from=paste&amp;height=722&amp;id=u5cb73267&amp;name=image.png&amp;originHeight=902&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=243584&amp;status=done&amp;style=none&amp;taskId=u5eb31e91-c35d-4ad4-9411-99a9b81a223&amp;title=&amp;width=1536" alt="image.png"> 可以手动分享，有效期是7天，一旦过了这个有效期将会失效<img src="https://cdn.nlark.com/yuque/0/2022/png/32843666/1665582950455-d48e7492-0701-467b-bf8f-b95ac143bfd2.png#averageHue=%23b5b5b5&amp;clientId=u990ab91e-cfc2-4&amp;from=paste&amp;height=570&amp;id=ufeb30091&amp;name=image.png&amp;originHeight=713&amp;originWidth=1614&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=106882&amp;status=done&amp;style=none&amp;taskId=u8b960536-eb81-448c-ae72-dc65e570729&amp;title=&amp;width=1291.2" alt="image.png"></p><h2 id="-1" tabindex="-1"><a class="header-anchor" href="#-1" aria-hidden="true">#</a></h2><p>总结 MInIO虽然是个开源项目，但是功能非常强大，小型项目中完全可以用它实现对象存储，也可以使用MinIO搭建一个免费的图床</p>`,33),i=[t];function o(r,l){return n(),s("div",null,i)}const m=a(p,[["render",o],["__file","MinIO.html.vue"]]);export{m as default};
